const firebaseConfig={apiKey:"AIzaSyAWjhrOA-GS6LPx8luMcE8KCbH7aYCr4oY",authDomain:"broadcast-1701e.firebaseapp.com",databaseURL:"https://broadcast-1701e-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"broadcast-1701e",storageBucket:"broadcast-1701e.appspot.com",messagingSenderId:"844755586030",appId:"1:844755586030:web:c41bc1585f41cf20549cff"};firebase.initializeApp(firebaseConfig);const database=firebase.database(),generateRandomString=()=>Math.random().toString(36).substring(2,15),form=document.querySelector(".form"),formSection=document.querySelector(".form-section"),inputName=document.querySelector('input[name="name"]'),inputEmail=document.querySelector('input[name="email"]'),id=getId();function getId(){let e;return null===localStorage.getItem("id")?(e=Math.random().toString(36).substring(2,15),formSection.style.display="block",document.body.classList.add("overflow")):(e=localStorage.getItem("id").replace(/"/g,""),document.body.classList.remove("overflow"),formSection.style.display="none",setTimeout(()=>{reEnter()},0)),e}function reEnter(){!function(e,i){let t=(new Date).toString();const n={};n["users/"+e+"//reEnterMs"]=i,n["users/"+e+"//reEnterDate"]=t,firebase.database().ref().update(n,e=>{e&&console.log(e)})}(id,Date.now())}function submitForm(e){e.preventDefault(),document.body.classList.remove("overflow"),window.scrollTo(pageXOffset,0);const i={id:id,loginMs:Date.now(),loginDate:(new Date).toString(),name:inputName.value,email:inputEmail.value};!function(e,i){const t={};t["users/"+i.id]=i,firebase.database().ref().update(t,i=>{i?console.log(i):(localStorage.setItem("id",JSON.stringify(e)),document.querySelector(".form-section").style.display="none")})}(i.id,i)}function closeTime(e,i){let t=(new Date).toString();const n={};return n["users/"+e+"//closeMs"]=i,n["users/"+e+"//closeDate"]=t,firebase.database().ref().update(n)}function hideTime(e,i){let t=(new Date).toString();const n={};return n["users/"+e+"//hideMs"]=i,n["users/"+e+"//hideDate"]=t,firebase.database().ref().update(n)}let hidden,visibilityChange;function handleVisibilityChange(){document[hidden]?closeTime(id,Date.now()):reEnter()}form.addEventListener("submit",e=>submitForm(e)),firebase.auth().signInAnonymously().then(()=>{console.log("signed in")}).catch(e=>{const i=e.code,t=e.message;console.log(i,t)}),void 0!==document.hidden?(hidden="hidden",visibilityChange="visibilitychange"):void 0!==document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange"),void 0===document.addEventListener||void 0===hidden?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(visibilityChange,handleVisibilityChange,!1);var mySwiper1=new Swiper(".swiper-container1",{loop:!1,slidesPerView:1,spaceBetween:10,centeredSlides:!0,slideToClickedSlide:!1,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".slider__pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0}});mySwiper1.on("click",(function(){return ym(74310484,"reachGoal","Картинка 1"),!0}));var mySwiper2=new Swiper(".swiper-container2",{loop:!1,slidesPerView:1,spaceBetween:10,centeredSlides:!0,slideToClickedSlide:!1,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".slider__pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0}});mySwiper2.on("click",(function(){return ym(74310484,"reachGoal","Картинка 2"),!0}));var mySwiper3=new Swiper(".swiper-container3",{loop:!1,slidesPerView:1,spaceBetween:10,centeredSlides:!0,slideToClickedSlide:!1,autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".slider__pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0}});mySwiper3.on("click",(function(){return ym(74310484,"reachGoal","Картинка 3"),!0}));var mySwiper4=new Swiper(".swiper-container4",{loop:!1,slidesPerView:1,spaceBetween:10,centeredSlides:!0,slideToClickedSlide:!1,autoplay:{delay:3e3,disableOnInteraction:!1},navigation:{nextEl:".gallery-slider__next",prevEl:".gallery-slider__prev"},keyboard:{enabled:!0}});mySwiper4.on("click",(function(){return ym(74310484,"reachGoal","Галерея"),!0}));var initPhotoSwipeFromDOM=function(e){for(var i=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var i=function e(i,t){return i&&(t(i)?i:e(i.parentNode,t))}(e.target||e.srcElement,(function(e){return e.tagName&&"LI"===e.tagName.toUpperCase()}));if(i){for(var n,o=i.parentNode,a=i.parentNode.childNodes,r=a.length,l=0,s=0;s<r;s++)if(1===a[s].nodeType){if(a[s]===i){n=l;break}l++}return n>=0&&t(n,o),!1}},t=function(e,i,t,n){var o,a,r,l=document.querySelectorAll(".pswp")[0];if(r=function(e){for(var i,t,n,o,a=e.childNodes,r=a.length,l=[],s=0;s<r;s++)1===(i=a[s]).nodeType&&(n=(t=i.children[0]).getAttribute("data-size").split("x"),o={src:t.getAttribute("href"),w:parseInt(n[0],10),h:parseInt(n[1],10)},i.children.length>1&&(o.title=i.children[1].innerHTML),t.children.length>0&&(o.msrc=t.children[0].getAttribute("src")),o.el=i,l.push(o));return l}(i),a={closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!1,counterEl:!1,arrowEl:!0,preloaderEl:!0,galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var i=r[e].el.getElementsByTagName("img")[0],t=window.pageYOffset||document.documentElement.scrollTop,n=i.getBoundingClientRect();return{x:n.left,y:n.top+t,w:n.width}}},n)if(a.galleryPIDs){for(var s=0;s<r.length;s++)if(r[s].pid==e){a.index=s;break}}else a.index=parseInt(e,10)-1;else a.index=parseInt(e,10);isNaN(a.index)||(t&&(a.showAnimationDuration=0),(o=new PhotoSwipe(l,PhotoSwipeUI_Default,r,a)).init(),o.listen("unbindEvents",(function(){var e=o.getCurrentIndex();mySwiper1.slideTo(e,0,!1),mySwiper2.slideTo(e,0,!1),mySwiper3.slideTo(e,0,!1),mySwiper4.slideTo(e,0,!1),mySwiper1.autoplay.start(),mySwiper2.autoplay.start(),mySwiper3.autoplay.start(),mySwiper4.autoplay.start()})),o.listen("initialZoomIn",(function(){mySwiper1.autoplay.stop(),mySwiper2.autoplay.stop(),mySwiper3.autoplay.stop(),mySwiper4.autoplay.stop()})))},n=document.querySelectorAll(e),o=0,a=n.length;o<a;o++)n[o].setAttribute("data-pswp-uid",o+1),n[o].onclick=i;var r=function(){var e=window.location.hash.substring(1),i={};if(e.length<5)return i;for(var t=e.split("&"),n=0;n<t.length;n++)if(t[n]){var o=t[n].split("=");o.length<2||(i[o[0]]=o[1])}return i.gid&&(i.gid=parseInt(i.gid,10)),i}();r.pid&&r.gid&&t(r.pid,n[r.gid-1],!0,!0)};initPhotoSwipeFromDOM(".my-gallery"),videojs("main_video",{controls:!0,autoplay:!1,preload:"none",poster:"../img/main-video-poster.jpg",plugins:{videoJsResolutionSwitcher:{default:"auto",dynamicLabel:!0}}},(function(){var e=this;e.on("play",(function(){return ym(74310484,"reachGoal","video1"),!0})),e.updateSrc([{src:"../video/SD/main-video.m4v",type:"video/mp4",label:"SD",res:"SD"},{src:"../video/HD/main-video.m4v",type:"video/mp4",label:"HD",res:"HD"},{src:"../video/FHD/main-video.m4v",type:"video/mp4",label:"FHD",res:"FHD"}]),e.on("resolutionchange",(function(){e.play()}))})),videojs("left_video",{controls:!0,autoplay:!1,preload:"none",width:"100%",height:"auto",poster:"../img/left-video-poster.jpg",plugins:{videoJsResolutionSwitcher:{default:"auto",dynamicLabel:!0}}},(function(){var e=this;e.on("play",(function(){return ym(74310484,"reachGoal","video2"),!0})),e.updateSrc([{src:"../video/SD/left-video.m4v",type:"video/mp4",label:"SD",res:"SD"},{src:"../video/HD/left-video.m4v",type:"video/mp4",label:"HD",res:"HD"},{src:"../video/FHD/left-video.m4v",type:"video/mp4",label:"FHD",res:"FHD"}]),e.on("resolutionchange",(function(){e.play()}))})),videojs("right_video",{controls:!0,autoplay:!1,preload:"none",width:"100%",height:"auto",poster:"../img/right-video-poster.jpg",plugins:{videoJsResolutionSwitcher:{default:"auto",dynamicLabel:!0}}},(function(){var e=this;e.on("play",(function(){return ym(74310484,"reachGoal","video3"),!0})),e.updateSrc([{src:"../video/SD/right-video.m4v",type:"video/mp4",label:"SD",res:"SD"},{src:"../video/HD/right-video.m4v",type:"video/mp4",label:"HD",res:"HD"},{src:"../video/FHD/right-video.m4v",type:"video/mp4",label:"FHD",res:"FHD"}]),e.on("resolutionchange",(function(){e.play()}))}));var medias=Array.prototype.slice.apply(document.querySelectorAll("audio,video"));medias.forEach((function(e){e.addEventListener("play",(function(e){medias.forEach((function(i){e.target!=i&&i.pause()}))}))}));